# NormCode AI Planning Pipeline - Instruction Block

Execute the five-phase NormCode AI Planning Pipeline to transform a natural language prompt into an executable NormCode plan.

## Phase 1: Confirmation of Instruction
1.1. Perform automated instruction distillation on the raw user prompt to produce a clean **Instruction Block**.
1.2. Perform automated context registration based on the system context to produce an initial **Context Manifest (`.json`)** and its associated **`context_store` directory**.
1.3. Present the generated artifacts for optional manual review and refinement.

## Phase 2: Deconstruction into NormCode Draft
2.1. Take the Instruction Block from Phase 1 and perform an automated NormCode deconstruction to generate a **NormCode Draft Straightforward (`.ncds`)** file.
2.2. Generate a **Natural Language NormCode (`.ncn`)** companion file for easier manual review.
2.3. Present the `.ncds` and `.ncn` files for optional manual review and refinement.

## Phase 3: Formalization
3.1. Formalize the `.ncds` draft into a **NormCode Draft (`.ncd`)** file by:
    - Adding flow indices (`?{flow_index}:`)
    - Adding sequence types (`?{sequence}:`)
    - Adding semantic type markers and bindings
3.2. Generate an updated `.ncn` companion for the formalized `.ncd`.
3.3. Present the formalized files for optional manual review and refinement.

## Phase 4: Post-Formalization and Contextualization
4.1. Enrich the `.ncd` file with execution annotations:
    - Paradigm specifications (`%{norm_input}:`, `%{paradigm}:`)
    - Resource locations (`%{file_location}:`, `%{prompt_location}:`)
    - Reference structure (`%{ref_axes}:`, `%{ref_element}:`)
4.2. Perform automated context distribution, generating a **`context_manifest.json`** and individual context files in `context_store/`.
4.3. Generate prompt files in `prompts/` directory.
4.4. Present all artifacts for optional manual review and refinement.

## Phase 5: Activation and Materialization
5.1. Activate the enriched `.ncd` into executable JSON repositories:
    - **`concept_repo.json`**: All concept definitions with reference structure
    - **`inference_repo.json`**: All inference definitions with `working_interpretation`
5.2. Generate a runnable **Python script (`.py`)** that loads the repositories and runs the orchestrator.
5.3. Present the final generated files for optional manual review before execution.

