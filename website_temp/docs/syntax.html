<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="NormCode Syntax Reference - Learn the complete syntax for writing structured AI plans.">
    <link rel="icon" type="image/png" href="../Psylensai_log_raw.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <title>Syntax Reference - NormCode è§„èŒƒç </title>
</head>
<body>
    <div class="menu-overlay"></div>

    <!-- Navigation -->
    <nav>
        <div class="nav-content">
            <a href="../index.html" class="nav-brand">
                <img src="../Psylensai_log_raw.png" alt="Psylens.AI" class="logo-small">
                <span class="company-name" data-i18n="nav.companyName">Psylens.AI</span>
            </a>
            <button class="menu-toggle" aria-label="Toggle navigation menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-links">
                <a href="../index.html" data-i18n="nav.home">Home</a>
                <div class="nav-dropdown">
                    <button class="nav-dropdown-trigger active" data-i18n="nav.docs">
                        Documentation
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 12 15 18 9"></polyline>
                        </svg>
                    </button>
                    <div class="nav-dropdown-menu">
                        <a href="../how-it-works.html" data-i18n="nav.overview">Overview</a>
                        <a href="syntax.html" class="active" data-i18n="nav.syntax">Syntax Reference</a>
                        <a href="execution.html" data-i18n="nav.execution">Execution Model</a>
                        <a href="compilation.html" data-i18n="nav.compilation">Compilation</a>
                        <a href="examples.html" data-i18n="nav.examples">Examples</a>
                    </div>
                </div>
                <a href="../team.html" data-i18n="nav.team">Team</a>
                <div class="lang-switcher">
                    <button class="lang-btn active" data-lang="en">EN</button>
                    <button class="lang-btn" data-lang="zh">ä¸­æ–‡</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Page Header -->
    <header class="page-header">
        <h1 data-i18n="page.title">Syntax Reference</h1>
        <p data-i18n="page.subtitle">The complete guide to NormCode's plan syntax.</p>
    </header>

    <!-- Main Content -->
    <main>
        <div class="breadcrumb">
            <a href="../how-it-works.html" data-i18n="nav.docs">Documentation</a>
            <span>â€º</span>
            <span data-i18n="page.title">Syntax Reference</span>
        </div>

        <!-- Core Syntax -->
        <section>
            <h2 data-i18n="section.coreMarkers">Core Markers</h2>
            <p data-i18n="section.coreMarkersDesc">NormCode uses just two primary symbols. Everything else is natural language.</p>
            
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th data-i18n="table.symbol">Symbol</th>
                            <th data-i18n="table.name">Name</th>
                            <th data-i18n="table.meaning">Meaning</th>
                            <th data-i18n="table.example">Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code class="inline-code">&lt;-</code></td>
                            <td data-i18n="markers.value">Value Concept</td>
                            <td data-i18n="markers.valueDesc">"This is data" (nouns)</td>
                            <td><code class="inline-code">&lt;- document summary</code></td>
                        </tr>
                        <tr>
                            <td><code class="inline-code">&lt;=</code></td>
                            <td data-i18n="markers.function">Functional Concept</td>
                            <td data-i18n="markers.functionDesc">"This is an action" (verbs)</td>
                            <td><code class="inline-code">&lt;= summarize this text</code></td>
                        </tr>
                        <tr>
                            <td><code class="inline-code">&lt;*</code></td>
                            <td data-i18n="markers.context">Context Concept</td>
                            <td data-i18n="markers.contextDesc">Loop/timing state</td>
                            <td><code class="inline-code">&lt;* current item</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Basic Structure -->
        <section>
            <h2 data-i18n="section.structure">Basic Structure</h2>
            <p data-i18n="section.structureDesc">Plans execute <strong>bottom-up</strong>: child inferences complete before their parents can run.</p>
            
            <div class="code-example">
                <code data-i18n-html="code.basicStructure">
<span class="comment">/: Final output (produced last)</span><br>
&lt;- document summary<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/: Action to produce the output</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;= summarize this text<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/: Input for the action (produced first)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;- clean text<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= extract main content, removing headers<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;- raw document
                </code>
            </div>

            <div class="info-box">
                <p data-i18n="section.goldenRule"><strong>The Golden Rule:</strong> Each inference has exactly ONE action (<code class="inline-code">&lt;=</code>). If you need multiple steps, nest them.</p>
            </div>
        </section>

        <!-- Concept Types -->
        <section>
            <h2 data-i18n="section.conceptTypes">Concept Types</h2>
            <p data-i18n="section.conceptTypesDesc">In formal <code class="inline-code">.ncd</code> syntax, concepts have explicit type markers:</p>
            
            <h3 data-i18n="section.valueTypes">Value Types (Non-Functional)</h3>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th data-i18n="table.symbol">Symbol</th>
                            <th data-i18n="table.name">Name</th>
                            <th data-i18n="table.description">Description</th>
                            <th data-i18n="table.example">Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code class="inline-code">{}</code></td>
                            <td data-i18n="types.object">Object</td>
                            <td data-i18n="types.objectDesc">Generic entity/data</td>
                            <td><code class="inline-code">{document}</code></td>
                        </tr>
                        <tr>
                            <td><code class="inline-code">&lt;&gt;</code></td>
                            <td data-i18n="types.proposition">Proposition</td>
                            <td data-i18n="types.propositionDesc">State/condition (boolean)</td>
                            <td><code class="inline-code">&lt;validation passed&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code class="inline-code">[]</code></td>
                            <td data-i18n="types.relation">Relation</td>
                            <td data-i18n="types.relationDesc">Collection (list/dict)</td>
                            <td><code class="inline-code">[documents]</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3 data-i18n="section.actionTypes">Action Types (Functional)</h3>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th data-i18n="table.symbol">Symbol</th>
                            <th data-i18n="table.name">Name</th>
                            <th data-i18n="table.description">Description</th>
                            <th data-i18n="table.example">Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code class="inline-code">::()</code></td>
                            <td data-i18n="types.imperative">Imperative</td>
                            <td data-i18n="types.imperativeDesc">Command/action</td>
                            <td><code class="inline-code">::(calculate sum)</code></td>
                        </tr>
                        <tr>
                            <td><code class="inline-code">::()&lt;&gt;</code></td>
                            <td data-i18n="types.judgement">Judgement</td>
                            <td data-i18n="types.judgementDesc">Evaluation (true/false)</td>
                            <td><code class="inline-code">::(is valid)&lt;ALL True&gt;</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Operators -->
        <section>
            <h2 data-i18n="section.operators">Syntactic Operators</h2>
            <p data-i18n="section.operatorsDesc">These operators are free (no LLM call), instant, and deterministic.</p>
            
            <h3 data-i18n="section.assigning">Assigning Operators ($)</h3>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th data-i18n="table.operator">Operator</th>
                            <th data-i18n="table.name">Name</th>
                            <th data-i18n="table.purpose">Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code class="inline-code">$.</code></td>
                            <td data-i18n="ops.specification">Specification</td>
                            <td data-i18n="ops.specificationDesc">Select first valid value from candidates</td>
                        </tr>
                        <tr>
                            <td><code class="inline-code">$+</code></td>
                            <td data-i18n="ops.continuation">Continuation</td>
                            <td data-i18n="ops.continuationDesc">Append along an axis (accumulation)</td>
                        </tr>
                        <tr>
                            <td><code class="inline-code">$-</code></td>
                            <td data-i18n="ops.selection">Selection</td>
                            <td data-i18n="ops.selectionDesc">Extract specific elements</td>
                        </tr>
                        <tr>
                            <td><code class="inline-code">$=</code></td>
                            <td data-i18n="ops.identity">Identity</td>
                            <td data-i18n="ops.identityDesc">Merge concepts (alias)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3 data-i18n="section.grouping">Grouping Operators (&amp;)</h3>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th data-i18n="table.operator">Operator</th>
                            <th data-i18n="table.name">Name</th>
                            <th data-i18n="table.purpose">Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code class="inline-code">&amp;[{}]</code></td>
                            <td data-i18n="ops.groupIn">Group In</td>
                            <td data-i18n="ops.groupInDesc">Collect items with labels (dictionary)</td>
                        </tr>
                        <tr>
                            <td><code class="inline-code">&amp;[#]</code></td>
                            <td data-i18n="ops.groupAcross">Group Across</td>
                            <td data-i18n="ops.groupAcrossDesc">Flatten items to list</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3 data-i18n="section.timing">Timing Operators (@)</h3>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th data-i18n="table.operator">Operator</th>
                            <th data-i18n="table.name">Name</th>
                            <th data-i18n="table.purpose">Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code class="inline-code">@:'</code></td>
                            <td data-i18n="ops.conditional">Conditional</td>
                            <td data-i18n="ops.conditionalDesc">Execute if condition is true</td>
                        </tr>
                        <tr>
                            <td><code class="inline-code">@:!</code></td>
                            <td data-i18n="ops.negated">Negated</td>
                            <td data-i18n="ops.negatedDesc">Execute if condition is false</td>
                        </tr>
                        <tr>
                            <td><code class="inline-code">@.</code></td>
                            <td data-i18n="ops.completion">Completion</td>
                            <td data-i18n="ops.completionDesc">Wait for dependency to complete</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3 data-i18n="section.looping">Looping Operator (*)</h3>
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th data-i18n="table.operator">Operator</th>
                            <th data-i18n="table.name">Name</th>
                            <th data-i18n="table.purpose">Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code class="inline-code">*.</code></td>
                            <td data-i18n="ops.iterate">Iterate</td>
                            <td data-i18n="ops.iterateDesc">For each item in collection</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Multi-Input -->
        <section>
            <h2 data-i18n="section.multiInput">Multi-Input Operations</h2>
            <p data-i18n="section.multiInputDesc">Actions can have multiple inputs. They see all listed inputsâ€”but nothing else.</p>
            
            <div class="code-example">
                <code data-i18n-html="code.multiInput">
&lt;- user sentiment<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;= determine if the user is satisfied<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;- support ticket<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;- conversation history
                </code>
            </div>
            
            <p data-i18n="section.multiInputNote">The action sees both <code class="inline-code">support ticket</code> AND <code class="inline-code">conversation history</code>â€”but nothing else from the workflow.</p>
        </section>

        <!-- Iteration -->
        <section>
            <h2 data-i18n="section.iteration">Iteration Pattern</h2>
            <p data-i18n="section.iterationDesc">Loop over collections with the iteration pattern:</p>
            
            <div class="code-example">
                <code data-i18n-html="code.iteration">
&lt;- all summaries<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;= for every document in the list return the document summary<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= select document summary to return<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;- document summary<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= summarize this document<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;- document to process now<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;- documents<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;* document to process now
                </code>
            </div>
            
            <div class="info-box">
                <p data-i18n="section.iterationNote"><strong>Key components:</strong> <code class="inline-code">&lt;- documents</code> is the base collection. <code class="inline-code">&lt;* document to process now</code> marks the current element in each iteration.</p>
            </div>
        </section>

        <!-- Conditional -->
        <section>
            <h2 data-i18n="section.conditional">Conditional Execution</h2>
            <p data-i18n="section.conditionalDesc">Execute steps only when conditions are met:</p>
            
            <div class="code-example">
                <code data-i18n-html="code.conditional">
&lt;- final output<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;= select reviewed output if available otherwise use draft<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;- draft needs review?<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= check if draft requires review<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;- draft output<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;- reviewed output<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= perform human review<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= if draft needs review<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;* draft needs review?<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;- draft output<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;- draft output
                </code>
            </div>
            
            <p data-i18n="section.conditionalNote">The review step only runs if <code class="inline-code">draft needs review?</code> evaluates to true.</p>
        </section>

        <!-- Formats -->
        <section>
            <h2 data-i18n="section.formats">File Formats</h2>
            <p data-i18n="section.formatsDesc">NormCode has multiple formats for different stages:</p>
            
            <div class="table-wrapper">
                <table>
                    <thead>
                        <tr>
                            <th data-i18n="table.format">Format</th>
                            <th data-i18n="table.purpose">Purpose</th>
                            <th data-i18n="table.description">Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code class="inline-code">.ncds</code></td>
                            <td data-i18n="formats.draft">Draft/Authoring</td>
                            <td data-i18n="formats.draftDesc">Start hereâ€”rough logic, easy to write</td>
                        </tr>
                        <tr>
                            <td><code class="inline-code">.ncd</code></td>
                            <td data-i18n="formats.formal">Formal Syntax</td>
                            <td data-i18n="formats.formalDesc">Structured with operators and types</td>
                        </tr>
                        <tr>
                            <td><code class="inline-code">.nci.json</code></td>
                            <td data-i18n="formats.structure">Inference Structure</td>
                            <td data-i18n="formats.structureDesc">Clear flow structure for analysis</td>
                        </tr>
                        <tr>
                            <td><code class="inline-code">.concept.json</code> + <code class="inline-code">.inference.json</code></td>
                            <td data-i18n="formats.executable">Executable</td>
                            <td data-i18n="formats.executableDesc">Loaded by orchestrator at runtime</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="info-box">
                <p data-i18n="section.formatNote"><strong>Typical workflow:</strong> Write <code class="inline-code">.ncds</code> â†’ Compiler transforms to <code class="inline-code">.ncd</code> â†’ Activation produces <code class="inline-code">.concept.json</code> + <code class="inline-code">.inference.json</code> â†’ Orchestrator executes.</p>
            </div>
        </section>

        <!-- Navigation -->
        <section style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid var(--border);">
            <div class="card-grid">
                <a href="execution.html" class="card-link">
                    <div class="card">
                        <span class="card-icon">âš™ï¸</span>
                        <h3 data-i18n="next.execution">Next: Execution Model</h3>
                        <p data-i18n="next.executionDesc">Learn how NormCode plans are executed step by step.</p>
                    </div>
                </a>
                <a href="examples.html" class="card-link">
                    <div class="card">
                        <span class="card-icon">ğŸ’¡</span>
                        <h3 data-i18n="next.examples">See Examples</h3>
                        <p data-i18n="next.examplesDesc">Real-world patterns and complete code samples.</p>
                    </div>
                </a>
            </div>
        </section>

        <a href="../how-it-works.html" class="back-link">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            <span data-i18n="nav.backDocs">Back to Documentation</span>
        </a>
    </main>

    <!-- Footer -->
    <footer>
        <p><strong>NormCode è§„èŒƒç </strong> Â· <a href="https://github.com/GEOGUANSIN/normCode" target="_blank">GitHub</a> Â· <a href="https://arxiv.org/abs/2512.10563" target="_blank" data-i18n="footer.paper">Paper</a></p>
    </footer>

    <script>
        const translations = {
            en: {
                nav: {
                    companyName: 'Psylens.AI',
                    home: 'Home',
                    docs: 'Documentation',
                    overview: 'Overview',
                    syntax: 'Syntax Reference',
                    execution: 'Execution Model',
                    compilation: 'Compilation',
                    examples: 'Examples',
                    team: 'Team',
                    backDocs: 'Back to Documentation'
                },
                page: {
                    title: 'Syntax Reference',
                    subtitle: 'The complete guide to NormCode\'s plan syntax.'
                },
                section: {
                    coreMarkers: 'Core Markers',
                    coreMarkersDesc: 'NormCode uses just two primary symbols. Everything else is natural language.',
                    structure: 'Basic Structure',
                    structureDesc: 'Plans execute <strong>bottom-up</strong>: child inferences complete before their parents can run.',
                    goldenRule: '<strong>The Golden Rule:</strong> Each inference has exactly ONE action (<code class="inline-code">&lt;=</code>). If you need multiple steps, nest them.',
                    conceptTypes: 'Concept Types',
                    conceptTypesDesc: 'In formal <code class="inline-code">.ncd</code> syntax, concepts have explicit type markers:',
                    valueTypes: 'Value Types (Non-Functional)',
                    actionTypes: 'Action Types (Functional)',
                    operators: 'Syntactic Operators',
                    operatorsDesc: 'These operators are free (no LLM call), instant, and deterministic.',
                    assigning: 'Assigning Operators ($)',
                    grouping: 'Grouping Operators (&)',
                    timing: 'Timing Operators (@)',
                    looping: 'Looping Operator (*)',
                    multiInput: 'Multi-Input Operations',
                    multiInputDesc: 'Actions can have multiple inputs. They see all listed inputsâ€”but nothing else.',
                    multiInputNote: 'The action sees both <code class="inline-code">support ticket</code> AND <code class="inline-code">conversation history</code>â€”but nothing else from the workflow.',
                    iteration: 'Iteration Pattern',
                    iterationDesc: 'Loop over collections with the iteration pattern:',
                    iterationNote: '<strong>Key components:</strong> <code class="inline-code">&lt;- documents</code> is the base collection. <code class="inline-code">&lt;* document to process now</code> marks the current element in each iteration.',
                    conditional: 'Conditional Execution',
                    conditionalDesc: 'Execute steps only when conditions are met:',
                    conditionalNote: 'The review step only runs if <code class="inline-code">draft needs review?</code> evaluates to true.',
                    formats: 'File Formats',
                    formatsDesc: 'NormCode has multiple formats for different stages:',
                    formatNote: '<strong>Typical workflow:</strong> Write <code class="inline-code">.ncds</code> â†’ Compiler transforms to <code class="inline-code">.ncd</code> â†’ Activation produces <code class="inline-code">.concept.json</code> + <code class="inline-code">.inference.json</code> â†’ Orchestrator executes.'
                },
                table: {
                    symbol: 'Symbol',
                    name: 'Name',
                    meaning: 'Meaning',
                    example: 'Example',
                    description: 'Description',
                    operator: 'Operator',
                    purpose: 'Purpose',
                    format: 'Format'
                },
                markers: {
                    value: 'Value Concept',
                    valueDesc: '"This is data" (nouns)',
                    function: 'Functional Concept',
                    functionDesc: '"This is an action" (verbs)',
                    context: 'Context Concept',
                    contextDesc: 'Loop/timing state'
                },
                types: {
                    object: 'Object',
                    objectDesc: 'Generic entity/data',
                    proposition: 'Proposition',
                    propositionDesc: 'State/condition (boolean)',
                    relation: 'Relation',
                    relationDesc: 'Collection (list/dict)',
                    imperative: 'Imperative',
                    imperativeDesc: 'Command/action',
                    judgement: 'Judgement',
                    judgementDesc: 'Evaluation (true/false)'
                },
                ops: {
                    specification: 'Specification',
                    specificationDesc: 'Select first valid value from candidates',
                    continuation: 'Continuation',
                    continuationDesc: 'Append along an axis (accumulation)',
                    selection: 'Selection',
                    selectionDesc: 'Extract specific elements',
                    identity: 'Identity',
                    identityDesc: 'Merge concepts (alias)',
                    groupIn: 'Group In',
                    groupInDesc: 'Collect items with labels (dictionary)',
                    groupAcross: 'Group Across',
                    groupAcrossDesc: 'Flatten items to list',
                    conditional: 'Conditional',
                    conditionalDesc: 'Execute if condition is true',
                    negated: 'Negated',
                    negatedDesc: 'Execute if condition is false',
                    completion: 'Completion',
                    completionDesc: 'Wait for dependency to complete',
                    iterate: 'Iterate',
                    iterateDesc: 'For each item in collection'
                },
                formats: {
                    draft: 'Draft/Authoring',
                    draftDesc: 'Start hereâ€”rough logic, easy to write',
                    formal: 'Formal Syntax',
                    formalDesc: 'Structured with operators and types',
                    structure: 'Inference Structure',
                    structureDesc: 'Clear flow structure for analysis',
                    executable: 'Executable',
                    executableDesc: 'Loaded by orchestrator at runtime'
                },
                code: {
                    basicStructure: '<span class="comment">/: Final output (produced last)</span><br>&lt;- document summary<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/: Action to produce the output</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;= summarize this text<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/: Input for the action (produced first)</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;- clean text<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= extract main content, removing headers<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;- raw document',
                    multiInput: '&lt;- user sentiment<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;= determine if the user is satisfied<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;- support ticket<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;- conversation history',
                    iteration: '&lt;- all summaries<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;= for every document in the list return the document summary<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= select document summary to return<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;- document summary<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= summarize this document<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;- document to process now<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;- documents<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;* document to process now',
                    conditional: '&lt;- final output<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;= select reviewed output if available otherwise use draft<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;- draft needs review?<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= check if draft requires review<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;- draft output<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;- reviewed output<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= perform human review<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= if draft needs review<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;* draft needs review?<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;- draft output<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;- draft output'
                },
                next: {
                    execution: 'Next: Execution Model',
                    executionDesc: 'Learn how NormCode plans are executed step by step.',
                    examples: 'See Examples',
                    examplesDesc: 'Real-world patterns and complete code samples.'
                },
                footer: {
                    paper: 'Paper'
                }
            },
            zh: {
                nav: {
                    companyName: 'å¿ƒé•œæ™º',
                    home: 'é¦–é¡µ',
                    docs: 'æ–‡æ¡£',
                    overview: 'æ¦‚è¿°',
                    syntax: 'è¯­æ³•å‚è€ƒ',
                    execution: 'æ‰§è¡Œæ¨¡å‹',
                    compilation: 'ç¼–è¯‘æµç¨‹',
                    examples: 'ç¤ºä¾‹',
                    team: 'å›¢é˜Ÿ',
                    backDocs: 'è¿”å›æ–‡æ¡£'
                },
                page: {
                    title: 'è¯­æ³•å‚è€ƒ',
                    subtitle: 'NormCodeè®¡åˆ’è¯­æ³•çš„å®Œæ•´æŒ‡å—ã€‚'
                },
                section: {
                    coreMarkers: 'æ ¸å¿ƒæ ‡è®°',
                    coreMarkersDesc: 'NormCodeåªä½¿ç”¨ä¸¤ä¸ªä¸»è¦ç¬¦å·ã€‚å…¶ä»–éƒ½æ˜¯è‡ªç„¶è¯­è¨€ã€‚',
                    structure: 'åŸºæœ¬ç»“æ„',
                    structureDesc: 'è®¡åˆ’<strong>è‡ªä¸‹è€Œä¸Š</strong>æ‰§è¡Œï¼šå­æ¨ç†åœ¨çˆ¶æ¨ç†è¿è¡Œä¹‹å‰å®Œæˆã€‚',
                    goldenRule: '<strong>é»„é‡‘æ³•åˆ™ï¼š</strong>æ¯ä¸ªæ¨ç†åªæœ‰ä¸€ä¸ªåŠ¨ä½œï¼ˆ<code class="inline-code">&lt;=</code>ï¼‰ã€‚å¦‚æœéœ€è¦å¤šä¸ªæ­¥éª¤ï¼Œè¯·åµŒå¥—å®ƒä»¬ã€‚',
                    conceptTypes: 'æ¦‚å¿µç±»å‹',
                    conceptTypesDesc: 'åœ¨æ­£å¼çš„<code class="inline-code">.ncd</code>è¯­æ³•ä¸­ï¼Œæ¦‚å¿µæœ‰æ˜ç¡®çš„ç±»å‹æ ‡è®°ï¼š',
                    valueTypes: 'å€¼ç±»å‹ï¼ˆéåŠŸèƒ½æ€§ï¼‰',
                    actionTypes: 'åŠ¨ä½œç±»å‹ï¼ˆåŠŸèƒ½æ€§ï¼‰',
                    operators: 'è¯­æ³•æ“ä½œç¬¦',
                    operatorsDesc: 'è¿™äº›æ“ä½œç¬¦æ˜¯å…è´¹çš„ï¼ˆæ— LLMè°ƒç”¨ï¼‰ã€å³æ—¶çš„å’Œç¡®å®šæ€§çš„ã€‚',
                    assigning: 'èµ‹å€¼æ“ä½œç¬¦ ($)',
                    grouping: 'åˆ†ç»„æ“ä½œç¬¦ (&)',
                    timing: 'æ—¶åºæ“ä½œç¬¦ (@)',
                    looping: 'å¾ªç¯æ“ä½œç¬¦ (*)',
                    multiInput: 'å¤šè¾“å…¥æ“ä½œ',
                    multiInputDesc: 'åŠ¨ä½œå¯ä»¥æœ‰å¤šä¸ªè¾“å…¥ã€‚å®ƒä»¬çœ‹åˆ°æ‰€æœ‰åˆ—å‡ºçš„è¾“å…¥â€”â€”ä½†ä»…æ­¤è€Œå·²ã€‚',
                    multiInputNote: 'åŠ¨ä½œåŒæ—¶çœ‹åˆ°<code class="inline-code">support ticket</code>å’Œ<code class="inline-code">conversation history</code>â€”â€”ä½†çœ‹ä¸åˆ°å·¥ä½œæµä¸­çš„å…¶ä»–å†…å®¹ã€‚',
                    iteration: 'è¿­ä»£æ¨¡å¼',
                    iterationDesc: 'ä½¿ç”¨è¿­ä»£æ¨¡å¼éå†é›†åˆï¼š',
                    iterationNote: '<strong>å…³é”®ç»„ä»¶ï¼š</strong><code class="inline-code">&lt;- documents</code>æ˜¯åŸºç¡€é›†åˆã€‚<code class="inline-code">&lt;* document to process now</code>æ ‡è®°æ¯æ¬¡è¿­ä»£ä¸­çš„å½“å‰å…ƒç´ ã€‚',
                    conditional: 'æ¡ä»¶æ‰§è¡Œ',
                    conditionalDesc: 'ä»…åœ¨æ»¡è¶³æ¡ä»¶æ—¶æ‰§è¡Œæ­¥éª¤ï¼š',
                    conditionalNote: 'å®¡æŸ¥æ­¥éª¤ä»…åœ¨<code class="inline-code">draft needs review?</code>è¯„ä¼°ä¸ºtrueæ—¶è¿è¡Œã€‚',
                    formats: 'æ–‡ä»¶æ ¼å¼',
                    formatsDesc: 'NormCodeæœ‰å¤šç§æ ¼å¼ç”¨äºä¸åŒé˜¶æ®µï¼š',
                    formatNote: '<strong>å…¸å‹å·¥ä½œæµï¼š</strong>ç¼–å†™<code class="inline-code">.ncds</code> â†’ ç¼–è¯‘å™¨è½¬æ¢ä¸º<code class="inline-code">.ncd</code> â†’ æ¿€æ´»äº§ç”Ÿ<code class="inline-code">.concept.json</code> + <code class="inline-code">.inference.json</code> â†’ ç¼–æ’å™¨æ‰§è¡Œã€‚'
                },
                table: {
                    symbol: 'ç¬¦å·',
                    name: 'åç§°',
                    meaning: 'å«ä¹‰',
                    example: 'ç¤ºä¾‹',
                    description: 'æè¿°',
                    operator: 'æ“ä½œç¬¦',
                    purpose: 'ç”¨é€”',
                    format: 'æ ¼å¼'
                },
                markers: {
                    value: 'å€¼æ¦‚å¿µ',
                    valueDesc: '"è¿™æ˜¯æ•°æ®"ï¼ˆåè¯ï¼‰',
                    function: 'åŠŸèƒ½æ¦‚å¿µ',
                    functionDesc: '"è¿™æ˜¯åŠ¨ä½œ"ï¼ˆåŠ¨è¯ï¼‰',
                    context: 'ä¸Šä¸‹æ–‡æ¦‚å¿µ',
                    contextDesc: 'å¾ªç¯/æ—¶åºçŠ¶æ€'
                },
                types: {
                    object: 'å¯¹è±¡',
                    objectDesc: 'é€šç”¨å®ä½“/æ•°æ®',
                    proposition: 'å‘½é¢˜',
                    propositionDesc: 'çŠ¶æ€/æ¡ä»¶ï¼ˆå¸ƒå°”å€¼ï¼‰',
                    relation: 'å…³ç³»',
                    relationDesc: 'é›†åˆï¼ˆåˆ—è¡¨/å­—å…¸ï¼‰',
                    imperative: 'ç¥ˆä½¿å¼',
                    imperativeDesc: 'å‘½ä»¤/åŠ¨ä½œ',
                    judgement: 'åˆ¤æ–­',
                    judgementDesc: 'è¯„ä¼°ï¼ˆçœŸ/å‡ï¼‰'
                },
                ops: {
                    specification: 'è§„èŒƒ',
                    specificationDesc: 'ä»å€™é€‰é¡¹ä¸­é€‰æ‹©ç¬¬ä¸€ä¸ªæœ‰æ•ˆå€¼',
                    continuation: 'ç»§ç»­',
                    continuationDesc: 'æ²¿è½´è¿½åŠ ï¼ˆç´¯ç§¯ï¼‰',
                    selection: 'é€‰æ‹©',
                    selectionDesc: 'æå–ç‰¹å®šå…ƒç´ ',
                    identity: 'æ’ç­‰',
                    identityDesc: 'åˆå¹¶æ¦‚å¿µï¼ˆåˆ«åï¼‰',
                    groupIn: 'åˆ†ç»„å…¥',
                    groupInDesc: 'ä½¿ç”¨æ ‡ç­¾æ”¶é›†é¡¹ç›®ï¼ˆå­—å…¸ï¼‰',
                    groupAcross: 'è·¨ç»„',
                    groupAcrossDesc: 'å°†é¡¹ç›®å±•å¹³ä¸ºåˆ—è¡¨',
                    conditional: 'æ¡ä»¶',
                    conditionalDesc: 'å¦‚æœæ¡ä»¶ä¸ºçœŸåˆ™æ‰§è¡Œ',
                    negated: 'å¦å®š',
                    negatedDesc: 'å¦‚æœæ¡ä»¶ä¸ºå‡åˆ™æ‰§è¡Œ',
                    completion: 'å®Œæˆ',
                    completionDesc: 'ç­‰å¾…ä¾èµ–å®Œæˆ',
                    iterate: 'è¿­ä»£',
                    iterateDesc: 'å¯¹é›†åˆä¸­çš„æ¯ä¸ªé¡¹ç›®'
                },
                formats: {
                    draft: 'è‰ç¨¿/ç¼–å†™',
                    draftDesc: 'ä»è¿™é‡Œå¼€å§‹â€”â€”ç²—ç•¥é€»è¾‘ï¼Œæ˜“äºç¼–å†™',
                    formal: 'æ­£å¼è¯­æ³•',
                    formalDesc: 'å¸¦æœ‰æ“ä½œç¬¦å’Œç±»å‹çš„ç»“æ„åŒ–',
                    structure: 'æ¨ç†ç»“æ„',
                    structureDesc: 'ç”¨äºåˆ†æçš„æ¸…æ™°æµç¨‹ç»“æ„',
                    executable: 'å¯æ‰§è¡Œ',
                    executableDesc: 'è¿è¡Œæ—¶ç”±ç¼–æ’å™¨åŠ è½½'
                },
                code: {
                    basicStructure: '<span class="comment">/: æœ€ç»ˆè¾“å‡ºï¼ˆæœ€åäº§ç”Ÿï¼‰</span><br>&lt;- æ–‡æ¡£æ‘˜è¦<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/: äº§ç”Ÿè¾“å‡ºçš„åŠ¨ä½œ</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;= æ€»ç»“æ­¤æ–‡æœ¬<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">/: åŠ¨ä½œçš„è¾“å…¥ï¼ˆé¦–å…ˆäº§ç”Ÿï¼‰</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;- æ¸…ç†åçš„æ–‡æœ¬<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= æå–ä¸»è¦å†…å®¹ï¼Œç§»é™¤æ ‡é¢˜<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;- åŸå§‹æ–‡æ¡£',
                    multiInput: '&lt;- ç”¨æˆ·æƒ…ç»ª<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;= åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æ»¡æ„<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;- å·¥å•<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;- å¯¹è¯å†å²',
                    iteration: '&lt;- æ‰€æœ‰æ‘˜è¦<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;= å¯¹åˆ—è¡¨ä¸­çš„æ¯ä¸ªæ–‡æ¡£è¿”å›æ–‡æ¡£æ‘˜è¦<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= é€‰æ‹©è¦è¿”å›çš„æ–‡æ¡£æ‘˜è¦<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;- æ–‡æ¡£æ‘˜è¦<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= æ€»ç»“æ­¤æ–‡æ¡£<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;- å½“å‰å¤„ç†çš„æ–‡æ¡£<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;- æ–‡æ¡£åˆ—è¡¨<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;* å½“å‰å¤„ç†çš„æ–‡æ¡£',
                    conditional: '&lt;- æœ€ç»ˆè¾“å‡º<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;= å¦‚æœæœ‰å®¡æ ¸è¾“å‡ºåˆ™é€‰æ‹©å®¡æ ¸è¾“å‡ºï¼Œå¦åˆ™ä½¿ç”¨è‰ç¨¿<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;- è‰ç¨¿éœ€è¦å®¡æ ¸ï¼Ÿ<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= æ£€æŸ¥è‰ç¨¿æ˜¯å¦éœ€è¦å®¡æ ¸<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;- è‰ç¨¿è¾“å‡º<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;- å®¡æ ¸åçš„è¾“å‡º<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= æ‰§è¡Œäººå·¥å®¡æ ¸<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= å¦‚æœè‰ç¨¿éœ€è¦å®¡æ ¸<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;* è‰ç¨¿éœ€è¦å®¡æ ¸ï¼Ÿ<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;- è‰ç¨¿è¾“å‡º<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;- è‰ç¨¿è¾“å‡º'
                },
                next: {
                    execution: 'ä¸‹ä¸€æ­¥ï¼šæ‰§è¡Œæ¨¡å‹',
                    executionDesc: 'äº†è§£NormCodeè®¡åˆ’å¦‚ä½•é€æ­¥æ‰§è¡Œã€‚',
                    examples: 'æŸ¥çœ‹ç¤ºä¾‹',
                    examplesDesc: 'çœŸå®ä¸–ç•Œçš„æ¨¡å¼å’Œå®Œæ•´ä»£ç ç¤ºä¾‹ã€‚'
                },
                footer: {
                    paper: 'è®ºæ–‡'
                }
            }
        };

        let currentLang = localStorage.getItem('lang') || 'en';

        function setLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('lang', lang);
            document.documentElement.lang = lang;
            
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                const keys = key.split('.');
                let value = translations[lang];
                
                for (const k of keys) {
                    value = value?.[k];
                }
                
                if (value !== undefined) {
                    if (value.includes('<code') || value.includes('<strong')) {
                        el.innerHTML = value;
                    } else {
                        el.textContent = value;
                    }
                }
            });

            // Handle HTML translations (for code examples)
            document.querySelectorAll('[data-i18n-html]').forEach(el => {
                const key = el.getAttribute('data-i18n-html');
                const keys = key.split('.');
                let value = translations[lang];
                
                for (const k of keys) {
                    value = value?.[k];
                }
                
                if (value !== undefined) {
                    el.innerHTML = value;
                }
            });

            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.getAttribute('data-lang') === lang);
            });
        }

        setLanguage(currentLang);

        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                setLanguage(btn.getAttribute('data-lang'));
            });
        });

        // Mobile menu
        const menuToggle = document.querySelector('.menu-toggle');
        const navLinks = document.querySelector('.nav-links');
        const menuOverlay = document.querySelector('.menu-overlay');

        function toggleMenu(open) {
            const isOpen = open !== undefined ? open : !navLinks.classList.contains('active');
            menuToggle.classList.toggle('active', isOpen);
            navLinks.classList.toggle('active', isOpen);
            menuOverlay.classList.toggle('active', isOpen);
            document.body.style.overflow = isOpen ? 'hidden' : '';
        }

        menuToggle.addEventListener('click', () => toggleMenu());
        menuOverlay.addEventListener('click', () => toggleMenu(false));
    </script>
</body>
</html>

